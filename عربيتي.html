<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ø¹Ø±Ø¨ÙŠØªÙŠ - Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø£ØµÙ†Ø§Ù</title>
<script src="https://unpkg.com/html5-qrcode" type="text/javascript"></script>
<style>
@import url('https://fonts.googleapis.com/css2?family=Tajawal&display=swap');
body{font-family:"Tajawal",sans-serif;direction:rtl;background-color:#f0f8ff;margin:0;padding:0;}
h2{text-align:center;color:#0d6efd;margin:20px 0;}
.container{width:100%;padding:20px;box-sizing:border-box;}
input, button{padding:10px;border-radius:8px;border:1px solid #ccc;font-size:14px;}
button{cursor:pointer;background-color:#0d6efd;color:#fff;border:none;}
button:hover{background-color:#084298;}
#suggestions{background:#fff;position:absolute;z-index:1000;width:100%;border:1px solid #ccc;border-radius:8px;display:none;max-height:150px;overflow-y:auto;}
table{width:100%;border-collapse:collapse;margin-top:15px;}
th,td{border:1px solid #ccc;padding:8px;text-align:center;white-space:normal;overflow-wrap:break-word;}
th{background-color:#0d6efd;color:#fff;}
tr:nth-child(even){background-color:#e7f1ff;}
tr:hover{background-color:#d0e4ff;}
.action-buttons{display:flex;gap:5px;justify-content:center;}
#summary{margin-top:10px;font-weight:bold;}
</style>
</head>
<body>

<h2>ğŸ›’ Ø¹Ø±Ø¨ÙŠØªÙŠ</h2>
<div class="container">

<label>Ø§Ø³Ù… Ø§Ù„ØµÙ†Ù Ø£Ùˆ Ø±Ù…Ø² Ø§Ù„ØµÙ†Ù:</label>
<div style="position:relative;display:flex;gap:10px;">
Â  <input type="text" id="searchItem" placeholder="Ø§ÙƒØªØ¨ Ø§Ù„Ø§Ø³Ù… Ø£Ùˆ Ø§Ù…Ø³Ø­ Ø§Ù„Ø±Ù…Ø²" style="flex:1;" autocomplete="off">
Â  <div id="suggestions"></div>
Â  <button type="button" id="scanBtn">ğŸ“· Ù…Ø³Ø­</button>
</div>

<div id="itemInfo" style="display:none;margin-top:10px;">
Â  <p>Ø§Ø³Ù… Ø§Ù„ØµÙ†Ù: <span id="infoName"></span></p>
Â  <p>Ø±Ù…Ø² Ø§Ù„ØµÙ†Ù: <span id="infoCode"></span></p>
Â  <p>Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹: <span id="infoPrice"></span></p>
Â  <label>Ø§Ù„ÙƒÙ…ÙŠØ©:</label>
Â  <input type="number" id="itemQty" value="1" min="1" style="width:80px;">
Â  <button id="addCartBtn">â• Ø¥Ø¶Ø§ÙØ© Ù„Ù„Ø¹Ø±Ø¨Ø©</button>
</div>

<table id="cartTable">
Â  <thead>
Â Â Â  <tr>
Â Â Â Â Â  <th>Ø§Ø³Ù… Ø§Ù„ØµÙ†Ù</th>
Â Â Â Â Â  <th>Ø±Ù…Ø² Ø§Ù„ØµÙ†Ù</th>
Â Â Â Â Â  <th>Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹</th>
Â Â Â Â Â  <th>Ø§Ù„ÙƒÙ…ÙŠØ©</th>
Â Â Â Â Â  <th>Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹</th>
Â Â Â Â Â  <th>Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>
Â Â Â  </tr>
Â  </thead>
Â  <tbody></tbody>
</table>
<div id="summary">Ø¹Ø¯Ø¯ Ø§Ù„Ù‚Ø·Ø¹: 0 | Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ: 0</div>

<script>
const items=[ // Ù…Ø«Ø§Ù„ Ø¨ÙŠØ§Ù†Ø§Øª
Â  {name:"Ø­Ù„ÙŠØ¨ Ø¨Ù‚Ø±ÙŠ", code:"001", price:200},
Â  {name:"Ø¹ØµÙŠØ± Ø±Ø§Ù†ÙŠ", code:"002", price:500},
Â  {name:"Ø¨Ø³ÙƒÙˆÙŠØª", code:"003", price:600}
];

let cart=[];
const searchItem=document.getElementById("searchItem");
const suggestions=document.getElementById("suggestions");
const itemInfo=document.getElementById("itemInfo");
const infoName=document.getElementById("infoName");
const infoCode=document.getElementById("infoCode");
const infoPrice=document.getElementById("infoPrice");
const itemQty=document.getElementById("itemQty");
const addCartBtn=document.getElementById("addCartBtn");
const cartTableBody=document.querySelector("#cartTable tbody");
const summary=document.getElementById("summary");
let selectedItem=null;

// Ø¨Ø­Ø« ØªÙØ§Ø¹Ù„ÙŠ
searchItem.addEventListener("input",()=>{
Â  const val=searchItem.value.trim().toLowerCase();
Â  if(!val){ suggestions.style.display="none"; return; }
Â  const matches=items.filter(it=>it.name.toLowerCase().includes(val) || it.code.toLowerCase().includes(val));
Â  if(matches.length===0){ suggestions.style.display="none"; return; }
Â  suggestions.innerHTML=matches.map(it=>`<div style="padding:5px;cursor:pointer;" onclick='selectItem(${JSON.stringify(it)})'>${it.name} | ${it.code}</div>`).join('');
Â  suggestions.style.display="block";
});

function selectItem(item){
Â  searchItem.value=item.name;
Â  suggestions.style.display="none";
Â  showItem(item);
}

function showItem(item){
Â  selectedItem=item;
Â  infoName.textContent=item.name;
Â  infoCode.textContent=item.code;
Â  infoPrice.textContent=item.price;
Â  itemQty.value=1;
Â  itemInfo.style.display="block";
}

// Ø¥Ø¶Ø§ÙØ© Ù„Ù„Ø¹Ø±Ø¨Ø©
addCartBtn.addEventListener("click",()=>{
Â  if(!selectedItem) return;
Â  const qty=Number(itemQty.value);
Â  if(qty<1) return;
Â  const subtotal=selectedItem.price*qty;
Â  const existing=cart.find(c=>c.code===selectedItem.code);
Â  if(existing) existing.qty+=qty;
Â  else cart.push({name:selectedItem.name,code:selectedItem.code,price:selectedItem.price,qty});
Â  updateCartTable();
Â  itemInfo.style.display="none";
Â  searchItem.value="";
Â  selectedItem=null;
});

function updateCartTable(){
Â  cartTableBody.innerHTML="";
Â  let totalQty=0,totalPrice=0;
Â  cart.forEach((c,i)=>{
Â Â Â  const subtotal=c.price*c.qty;
Â Â Â  totalQty+=c.qty; totalPrice+=subtotal;
Â Â Â  const row=document.createElement("tr");
Â Â Â  row.innerHTML=`<td>${c.name}</td><td>${c.code}</td><td>${c.price}</td><td>${c.qty}</td><td>${subtotal}</td>
Â Â Â  <td class="action-buttons">
Â Â Â Â Â  <button onclick="deleteCartItem(${i})" style="background-color:#dc3545;">ğŸ—‘ï¸ Ø­Ø°Ù</button>
Â Â Â  </td>`;
Â Â Â  cartTableBody.appendChild(row);
Â  });
Â  summary.textContent=`Ø¹Ø¯Ø¯ Ø§Ù„Ù‚Ø·Ø¹: ${totalQty} | Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ: ${totalPrice}`;
}

function deleteCartItem(index){
Â  cart.splice(index,1);
Â  updateCartTable();
}

// Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ø§Ù‚ØªØ±Ø§Ø­Ø§Øª Ø¹Ù†Ø¯ Ø§Ù„Ù†Ù‚Ø± Ø®Ø§Ø±Ø¬ Ø§Ù„Ø­Ù‚Ù„
document.addEventListener("click",e=>{
Â  if(e.target!==searchItem) suggestions.style.display="none";
});

// Ù…Ø«Ø§Ù„: Ø¥Ø¶Ø§ÙØ© Ù…Ø§Ø³Ø­ QR (HTML5 QR Code) Ù„Ø§Ø­Ù‚Ø§Ù‹
let isScanning=false;
const reader=document.createElement("div");
const html5QrCode=new Html5Qrcode("reader");
const scanBtn=document.getElementById("scanBtn");
scanBtn.addEventListener("click",async()=>{
Â  alert("Ù…ÙŠØ²Ø© Ø§Ù„Ù…Ø³Ø­ ÙŠÙ…ÙƒÙ† Ø§Ø¶Ø§ÙØªÙ‡Ø§ Ù„Ø§Ø­Ù‚Ù‹Ø§ Ø¨Ù†ÙØ³ Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¨Ø­Ø« Ø§Ù„ØªÙØ§Ø¹Ù„ÙŠ");
});
</script>

</div>
</body>
</html>

